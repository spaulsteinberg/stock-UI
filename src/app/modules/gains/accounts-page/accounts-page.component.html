<div class="jumbotron text-center">
    <div class="text-left home-button">
        <button mat-raised-button class="home-button-actual" (click)="nav('HOME')">
            <mat-icon>home</mat-icon>
        </button>
    </div>
    <h4 class="display-3">Accounts View</h4>
    <div class="row">
        <div class="col col-md-1 offset-md-1 text-left">
            <button mat-raised-button (click)="nav('WATCHLIST')">
                <mat-icon>arrow_back_ios</mat-icon>
                Watchlist
            </button>
        </div>
        <div class="col col-md-1 offset-md-8 text-left">
            <button mat-raised-button (click)="nav('CHARTS')">
                Charts
                <mat-icon>arrow_forward_ios</mat-icon>
            </button>
        </div>
    </div>
</div>
<div class="row" *ngIf="accountNames$ | async as names; else empty">
    <div class="col col-md-2 offset-md-1" >
        <mat-form-field appearance="outline" [matTooltipPosition]="tooltipPosition" [matTooltip]="tooltipMessage">
            <mat-label class="text-success">Choose an Account</mat-label>
            <mat-select class="text-white" [(value)]="selectedAccount" (selectionChange)="selectChange($event)">
                <mat-option class="text-white" *ngFor="let name of names" [value]="name">{{name}}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div class="col col-md-5 offset-md-1">
        <app-dialog [accountNames]="names" [currentAccount]="selectedAccount" [symbols]="listOfSymbols$ | async"></app-dialog>
    </div>
</div>
<ng-template #empty>
    <p>No accounts. Please click 'Add Account' to interact with your real stocks.</p>
    <p *ngIf="isErr">An error occurred. Please reload and try again.</p>
</ng-template>
<!-- Work starting here for menu-->
<button mat-icon-button [matMenuTriggerFor]="menu" #menuTrigger="matMenuTrigger" (mouseenter)="menuTrigger.openMenu()">
    <mat-icon>settings</mat-icon>
</button>
<mat-menu #menu="matMenu">
    <button mat-menu-item [matMenuTriggerFor]="positions">
        <mat-icon style="background-color: green;">attach_money</mat-icon>
        <span>Position</span>
    </button>
    <button mat-menu-item [matMenuTriggerFor]="accounts">
        <mat-icon style="background-color: #b2dfdb;">account_balance</mat-icon>
        <span>Account</span>
    </button>
</mat-menu>
<mat-menu #positions="matMenu">
    <button class="positions-menu add" mat-menu-item [matTooltipPosition]="tooltipPosition" [matTooltip]="tooltipAddPosition" (click)="openPositionDialog(0)">
        <mat-icon>add</mat-icon>
    </button>
    <button class="positions-menu remove" mat-menu-item [matTooltipPosition]="tooltipPosition" [matTooltip]="tooltipRemovePosition" (click)="openPositionDialog(1)">
        <mat-icon>remove</mat-icon>
    </button>
</mat-menu>
<mat-menu #accounts="matMenu">

</mat-menu>
<!-- Ending here -->
<div class="row" *ngIf="selectedAccount !== undefined">
    Add/remove placeholder position: 
    <button mat-raised-button id="add-position-button" [matTooltipPosition]="tooltipPosition" [matTooltip]="tooltipAddPosition" class="mx-3" (click)="openPositionDialog(0)">
        <mat-icon>add</mat-icon>
        Add Position
    </button>
    <button mat-raised-button id="remove-position-button"  [matTooltipPosition]="tooltipPosition" [matTooltip]="tooltipRemovePosition" class="mx-3" (click)="openPositionDialog(1)">
        <mat-icon>remove</mat-icon>
        Remove Position
    </button>
    <div class="col col-md-10 offset-md-1">
        <app-accounts-table [accountData]="accountDisplay$ | async"></app-accounts-table>
    </div>
</div>